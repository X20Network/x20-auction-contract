# Structure of Orders in the Smart Contract

## Description

In order to optimise gas usage, the three values are bit shifted and orders are stored in a single ```uint256``` variable in the following way:

```
  [----|--------------|--------------]
 32 bits    112 bits      112 bits
 User ID     Price         Amount
```

The User ID is an incremental ID representing an Ethereum address that is automatically generated by ```register_()``` upon the first deposit.

Price represents the price of 1 full token in Ether, based on however many decimal places the token contract specifies.

Amount represents the number of tokens in small units of the token equivalent to Wei for Ether.

## Limitations

The 32 bits for User ID allows at most ```2^32 = 4,294,967,296``` users to register with the smart contract. This is deemed acceptable as it would take over ```3 × 10^14``` gas worth over ```300,000``` Ether at a gasPrice of 1 GWei to fill the registry.

The 112 bits for Price and Amount allows values up to over ```5 × 10^33```. For the price, that would be over ```5 × 10^15``` Ether for one token. For the amount, that would also be over ```5 × 10^15``` tokens if the token had 18 decimals. (with none of the top 100 ERC-20 tokens having more than 18 decimal places as of 13/09/2018)

## Validation

The values that are used to create an order are always checked for validity using the ```is32bit(uint)``` and ```is112bit(uint)``` functions and so transactions would fail on any overflow.
